import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import * as stories from '../stories/useAuthFetch.story';

<Meta title="Modules/firebase-hooks/Hooks/useAuthFetch" />

# Overview

`useAuthFetch` hook will return an object with a `fetch` async function and a `isLoading` state.
The fetch function will use the native fetch API to make a request to a firebase https function.
This function will construct the function url internally and also will attach the firebase user id token to make an authenticated request.

### Usage.

```js
const { fetch, isLoading } = useAuthFetch({
    functionName: 'myFunctionName', // required
    region: 'europe-west1', // optional, defaults to 'us-central1'
});

const addRecord = async () => {
    const result = await fetch('/myFunctionPathName', {
        body: { name: 'John Doe', age: 30 },
        method: 'POST',
    });
};

return <Button label="Make Request" onClick={addRecord} isLoading={isLoading} />;
```

<Preview>
    <Story name="useAuthFetch">{stories.UseAuthFetch()}</Story>
</Preview>
